
<script type="text/javascript" src="javascripts/random_insult.js"></script>

<h2>Newsfeed</h2>


<% if signed_in? %>
<a href="/users/<%= current_user.id%>/profile">
  <button type="submit" value="Profile">Profile</button>
</a>
<% end %>


<%= form_for @post do |form| %>
  <%= form.label :message %>
  <%= form.text_field :message %>

  <%= form.submit "Submit" %>
<% end %>

<br />
<button id="insult-randomizer">Post Random Insult</button>
<br />

<% @posts_sorted.each do |post| %>
  <p><%= auto_link(post.message) %>, created at
  <%= "#{post.created_at.strftime("%H:%M:%S, %d %b %Y")}"%>
  </p>

<% end %>

<script>
   $.getJSON('insults.json', function(data) {
        var adjective = data.adjective[Math.floor(Math.random()*data.adjective.length)];
        var noun = data.noun[Math.floor(Math.random()*data.noun.length)];

   });
  var btn = document.getElementById("insult-randomizer");
  btn.addEventListener("click", function() {
    # // var insult = generate random insult
  

    # // make post request to /posts/create => {message: insult}
    # // check response code is 200
    # // win
  });
</script>
